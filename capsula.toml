[pre-run]
context = [
    { type = "CommandContext", command = "poetry check --lock" },
    { type = "CommandContext", command = "pip freeze --exclude-editable > requirements.txt" },
    { type = "FileContext", path = "pyproject.toml", copy = true },
    { type = "FileContext", path = "requirements.txt", move = true },
    { type = "GitRepositoryContext", name = "capsula" },
    { type = "CwdContext" },
    { type = "CpuContext" },
]
reporter = [{ type = "JsonDumpReporter" }]

[in-run]
watcher = [{ type = "UncaughtExceptionWatcher" }, { type = "TimeWatcher" }]
reporter = [{ type = "JsonDumpReporter" }]

[post-run]
context = [{ type = "FileContext", path = "examples/pi.txt", move = true }]
reporter = [{ type = "JsonDumpReporter" }]

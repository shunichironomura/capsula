[[pre-run.context]]
type = "CommandContext"
command = "poetry check --lock"

[[pre-run.context]]
type = "CommandContext"
command = "pip freeze --exclude-editable > requirements.txt"

[[pre-run.context]]
type = "FileContext"
path = "pyproject.toml"
copy = true

[[pre-run.context]]
type = "FileContext"
path = "requirements.txt"
move = true

[[pre-run.context]]
type = "GitRepositoryContext"
name = "capsula"

[[pre-run.context]]
type = "CwdContext"

[[pre-run.context]]
type = "CpuContext"

[[pre-run.reporter]]
type = "JsonDumpReporter"

[[in-run.watcher]]
type = "UncaughtExceptionWatcher"

[[in-run.watcher]]
type = "TimeWatcher"

[[in-run.reporter]]
type = "JsonDumpReporter"

[[post-run.context]]
type = "FileContext"
path = "examples/pi.txt"
move = true

[[post-run.reporter]]
type = "JsonDumpReporter"

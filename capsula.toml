vault-dir = "vault"

[pre-run]
contexts = [
    { type = "CwdContext" },
    { type = "CpuContext" },
    { type = "PlatformContext" },
    { type = "GitRepositoryContext", name = "capsula", path = "@/" },
    { type = "CommandContext", command = "uv lock --locked", cwd = "@/" },
    { type = "FileContext", path = "@/pyproject.toml", copy = true },
    { type = "FileContext", path = "@/uv.lock", copy = true },
    { type = "CommandContext", command = "uv export > requirements.txt", cwd = "@/" },
    { type = "FileContext", path = "@/requirements.txt", move = true },
    { type = "EnvVarContext", name = "HOME" },
]
reporters = [{ type = "JsonDumpReporter" }]

[in-run]
watchers = [{ type = "UncaughtExceptionWatcher" }, { type = "TimeWatcher" }]
reporters = [{ type = "JsonDumpReporter" }]

[post-run]
reporters = [{ type = "JsonDumpReporter" }]
